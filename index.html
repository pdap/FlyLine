<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Canvas Flyline</title>

	
	<style>
		*{
			margin:0px;
			box-sizing: border-box;
		}
		html,body{
			height: 100%;
		}
		#main{
			width: 100%;
			height: 100%;
			overflow:hidden;
			background: black;
		}
		#canvas{
			position: absolute;
			z-index: 999;
			cursor: crosshair;
		}
		#controls{
			border:2px red solid;
			position: absolute;
			z-index: 9;
			background: #fff;
			padding: 20px;
		}
	</style>
</head>
<body>
	<div id="main">
		<div id="controls">
			鼠标拖动试试
		</div>
		<canvas id="canvas">
		</canvas>
	</div>
	<script>
		window.onload = function(){
			var canvas = document.querySelector("#canvas");
			canvas.width = document.querySelector("#main").clientWidth;
			canvas.height = document.querySelector("#main").clientHeight;

			var context = canvas.getContext("2d");

			var clicked = false;

			var p = [];

			var w = canvas.width;
			var h = canvas.height;


			flyline.setCanvas("#canvas");

			document.getElementById('canvas').addEventListener("mousedown",function(e){
				console.log(e);
				clicked = true;
				p[0] = [e.x,e.y]
			});
			document.getElementById('canvas').addEventListener("mousemove",mouseMove);
			document.getElementById('canvas').addEventListener("mouseup",mouseUp);


			function mouseMove(ev){
				//console.log(ev)
				if(clicked){
					p[1] = [ev.x,ev.y];
				}

			}
			function mouseUp(ev){
				if(p[0] && p[1]){
					flyline.addFlyL({
						start:{x:p[0][0],y:p[0][1]},
						target:{x:p[1][0],y:p[1][1]},
						color:'#'+Math.floor(Math.random()*16777215).toString(16),
						time:2*Math.random()*1000,
						len:Math.random(),
						size:5*Math.random()
					})
				}
				p = [];
				clicked = false;
			}
			
			
		}
	</script>
	<script src="./stats.js"></script>
	<script src="./src/flyline.js"></script>
</body>
</html>